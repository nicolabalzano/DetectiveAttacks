import os.path

import pdfkit


def generate_pdf_from_html(html_file_path, pdf_file_path):
    """
    Generate a PDF file from an HTML file
    :param pdf_file_path: path to the PDF file
    :param html_file_path: path to the HTML file
    :return: path to the PDF file
    """
    
    # for windows user
    # parent_path = os.path.dirname(os.path.abspath(__file__))
    # config = pdfkit.configuration(wkhtmltopdf=parent_path + '/wkhtmltopdf/bin/wkhtmltopdf.exe')
    # pdfkit.from_file(html_file_path, pdf_file_path, configuration=config)
    
    options = {
        'page-size': 'Letter',
        'margin-top': '0.5in',
        'margin-right': '0.75in',
        'margin-bottom': '0.75in',
        'margin-left': '0.75in',
        'encoding': "UTF-8",
        'footer-spacing': '3',
        'footer-font-size':'10',
        'footer-right': '[page] of [topage]',
        'footer-html': 'http://localhost:5002/get_footer',
        'custom-header' : [
            ('Accept-Encoding', 'gzip')
        ],
        'no-outline': None
    }
    
    pdfkit.from_file(html_file_path, pdf_file_path, options=options)

    return pdf_file_path